/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
	id 'groovy'
}

description = 'dbdeploy-cli'


dependencies {
	compile project(':dbdeploy-core')
	compile 'commons-cli:commons-cli:1.4'
	testImplementation 'org.spockframework:spock-core:1.3-groovy-2.5'
	testImplementation 'net.bytebuddy:byte-buddy:1.9.13'
}


task fatJar(type: Jar) {
	manifest {
		attributes 'Implementation-Title': 'dbdeploy-cli',
		           'Implementation-Version': version,
		           'Main-Class': 'com.dbdeploy.CommandLineTarget'
	}
	
	//noinspection GroovyAssignabilityCheck
	archiveBaseName.set project.name + '-all'

	from {
		configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
	}
	with jar
}
